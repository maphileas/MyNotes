
## 多态

- 存在的问题：

```C++
#include<iostream>
using namespace std;
class Animal
{
public:
    void speak()
    {
        cout << "动物在说话" << endl;
    }
};
class Cat : public Animal
{
public:
    void speak()
    {
        cout << "喵喵喵" << endl;
    }    
};

class Dog : public Animal
{
public:
    void speak()
    {
        cout << "汪汪汪" << endl;
    }
};

void DoSpeak(Animal &animal)
{
    animal.speak();
}

void test()
{
    Cat cat;
    DoSpeak(cat);

}
int main()
{
    test();
    system("pause");
    return 0;
}
```
运行结果：  
+-----------------------------------------+  
动物在说话  
请按任意键继续...  
+-----------------------------------------+  
**现象**：这与我们所期望的不太相同，我们希望传入什么对象就调用什么对象的函数，即希望DoSpeak()中传入Cat时，是小猫在说话，传入Dog时，是小狗在说话。


- 多态：
  - 静态多态：函数重载和运算符重载，属于静态多态，复用函数名
  - 动态多态：派生类（子类）和虚函数现实运行时的多态。

- 静态多态和动态多态的区别：
  - 静态多态：函数地址早绑定，编译阶段确定函数地址。
  - 动态多态：函数地址晚绑定，运行阶段确定函数地址

 - 解决方法：
 在基类的方法加入virtual关键字即可
 ```C++
 #include<iostream>
using namespace std;
class Animal
{
public:
    virtual void speak()
    {
        cout << "动物在说话" << endl;
    }
};
class Cat : public Animal
{
public:
    void speak()
    {
        cout << "喵喵喵" << endl;
    }    
};

class Dog : public Animal
{
public:
    void speak()
    {
        cout << "汪汪汪" << endl;
    }
};

void DoSpeak(Animal &animal)
{
    animal.speak();
}

void test()
{
    Cat cat;
    DoSpeak(cat);

    Dog dog;
    DoSpeak(dog);

}

int main()
{
    test();
    //test01();
    system("pause");
    return 0;
}
 ```
 运行结果：   
+-----------------------------------------+  
喵喵喵  
汪汪汪  
请按任意键继续...  
+-----------------------------------------+  

